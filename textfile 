import { Injectable } from '@angular/core';
import { Review, ReviewStatus } from './your-model-path';

@Injectable({
  providedIn: 'root'
})
export class ReviewStoreService {
  private reviewMap = new Map<number, Review>();

  // Set records to store (cast status to enum if needed)
  setRecords(records: any[]) {
    const casted: Review[] = records.map(r => ({
      ...r,
      status: r.status as ReviewStatus
    }));

    this.reviewMap.clear();
    casted.forEach(record => this.reviewMap.set(record.reviewId, record));
  }

  // âœ… Get the enum status of a given review ID
  getStatus(reviewId: number): ReviewStatus | undefined {
    return this.reviewMap.get(reviewId)?.status;
  }

  // Optionally get the whole Review
  getReview(reviewId: number): Review | undefined {
    return this.reviewMap.get(reviewId);
  }
}